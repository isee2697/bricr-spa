# REST - don't remove

input LoginInput {
  username: String!
  password: String!
}

type LoginResponse {
  accessToken: String!
  refreshToken: String!
}

input ForgotPasswordInput {
  username: String!
}

type ForgotPasswordResponse {
  error: String
  stack: String
}

input ResetPasswordInput {
  newPassword: String!
}

type ResetPasswordResponse {
  error: String
  stack: String
}

# END REST

directive @auth on FIELD_DEFINITION

type Profile {
  id: String!
  firstName: String
  lastName: String
  email: String
  avatar: String
  teams: [ProfileTeam!]
}

type ProfileTeam {
  id: String!
  name: String
}

type SearchMetadata {
  total: Int!
}

enum SortDirection {
  asc
  desc
}

input Sort {
  column: String!
  direction: SortDirection!
}

input Pagination {
  from: Int
  limit: Int
  searchAfter: [String!]
}

scalar Date

type Company {
  id: String!
  teams: [Team!]
  name: String
}

type Team{
  id: String!
  members: [Profile!]
  company: Company!
  name: String
}

enum RealEstateType {
  Residential,
  Business
}

enum DevelopmentType {
  New,
  Existing
}

enum PimStatus {
  Prospect,
  Available,
  Option,
  Bid,
  SoldWithReservation,
  RentedWithReservation,
  Sold,
  Rented
} 

enum PropertyType {
  House,
  Apartment,
  Commercial,
  Agricultural,
  ParkingLot,
  BuildingPlot,
  Other
}

enum EventEntityType {
  Pim,
}

enum EventAction {
  Created,
  Updated,
  Removed,
}

enum PropertyTypeDetailed {
  SingleFamily,
  DykeHouse,
  CourtHouse,
  DriveInHome,
  SplitLevel,
  QuadrantHouse,
  PatioHouse,
  Villa,
  CanalHouse,
  WaterHouse,
  Bungalow,
  SemiBungalow,
  StiltHouse,
  BusinessOrServiceHome,
  Estate,
  CountryHouse,
  Mansion
}

enum PropertyConnection {
  SemiDetached,
  FinalHouse,
  CornerHouse,
  TerracedHouse,
  DetachedHouse
}

enum PropertyAvailability {
  InConsultation,
  Immediatelly,
  ByDate
}

enum PropertyHabitation {
  RecreationalHome,
  PermanentOccupation
}

enum PropertySpaces {
  Kitchen
}

enum SpaceShape {
  Rectangle,
  Square,
  LType,
  TType,
  UType,
  ZType
}

type SpaceMeasurement {
  length: Float,
  width: Float,
  height: Float,
  surface: Float,
  volume: Float
}

enum SpaceServiceHeating {
  GeothermalHeat,
  NoHeating,
  Fireplace,
  MultiBurner,
  HotAirHeating,
  PelletStove,
  ElectricHeating,
  DistrictHeating,
  GasFireplace,
  CoalStove,
  WallHeating,
  HeatPump,
  MotherFireplace,
  GasHeaters,
  BlockHeatingWoodStove,
  CentralHeatingBoiler,
  UnderfloorHeatingEntirely,
  PossibilityForFireplaceHeat,
  UnderfloorHeatingPartly,
  RecoveryInstalation
}

enum KitchenType {
  MainKitchen,
  Scullery
}

enum KitchenConstruction {
  DenseKitchen,
  EatInKitchen,
  HalfOpenKitchen,
  OpenKitchen
}

enum KitchenServices {
  KitchenIsland,
  WashIsland
}

enum KitchenAppliances {
  Refrigerator,
  Microwave,
  Dishwasher,
  Oven,
  Stove
}

enum KitchenHob {
  GasHob,
  InductionHob,
  ElectricHob,
  CeramicHob,
  HalogenHob
}

enum FloorType {
  Attic,
  Floor,
  Basement,
  GroundFloor,
  Loft,
}

enum SpaceType {
  Kitchen,
  Bathroom,
  LivingRoom,
  Bedroom,
  HomeOffice,
  Other,
}

enum OutsideFeatureType {
  Garden,
  Garage,
  Storage,
  Terrain,
  ParkingLot,
}

enum GardenType {
  Backyard,
  PatioOrAtrium,
  Place,
  AllGroundGarden,
  FrontGarden,
  SunTerrace,
  BackGarden,
}

enum GardenQualityType {
  ToBeConstructed,
  BeautifullyConstructed,
  Normal,
  Neglected,
  TakenCareOf,
}

enum Location {
  North,
  South,
  East,
  West,
}

enum GardenShapeType {
  Square,
  Rectangle,
  LShape,
  UShape,
  TShape,
}

enum QualityInformations {
  Simple,
  Normal,
  Luxury,
  Excellent,
  GoodToStickOut,
  Good,
  ReasonableToGood,
  Fair,
  ModerateToFairRedelijik,
  Moderate,
  BadToModerate,
  Bad
}

enum PropertyRelatedItems {
  Balcony,
  Terrace,
  RoofTerrace,
  Porch
}

enum RoofTypes {
  TransverseRoof,
  ClassRoof,
  MansardRoof,
  FlatRoof,
  HippedRoof,
  TentRoof,
  SaddleRoof,
  CompositeRoof
}

enum RoofMaterials {
  Asbestos,
  BituminousRoofing,
  Plastic,
  Slate,
  Metal,
  Pans,
  Other
}

enum RoofInsulations {
  SprayFoam,
  RigidBoards,
  BlanketOrMatting,
  GlassRock,
  MineralWool,
  LooseFill,
  StructuralPanels
}

type KitchenAppliance {
  name: KitchenAppliances!,
  quantity: Int!,
  notes: String
}

type KitchenSpace {
  constructionYear: Float,
  notes: String,
  type: KitchenType,
  constructionType: KitchenConstruction,
  services: [KitchenServices],
  servicesNotes: String,
  appliances: [KitchenAppliance],
  hob: KitchenHob,
  shape: SpaceShape,
  measurement: SpaceMeasurement,
  serviceHeating: [SpaceServiceHeating],
  images: [File!]
}

type RectangleDimensions {
  length: Float,
  height: Float,
}

union GardenDimensions = RectangleDimensions

type GardenFeature {
  mainGarden: Boolean,
  type: GardenType,
  notes: String,
  quality: GardenQualityType,
  location: [Location],
  shape: GardenShapeType,
  dimensions: GardenDimensions,
  surface: Float,
  pictures: [String]
}

type HouseGeneral  {
  availability: PropertyAvailabilityInformation
  construction: ConstructionInformation
  floor: FloorType
  propertyConnection: PropertyConnection
  propertyDetails: PropertyTypeDetailed
}

input HouseGeneralInput {
  id: ID!
  availability: PropertyAvailabilityInformationInput
  construction: ConstructionInformationInput
  floor: FloorType
  propertyConnection: PropertyConnection
  propertyDetails: PropertyTypeDetailed
  street: String!
  city: String!
  houseNumber: String!
  postalCode: String!
}

enum ConstructionType {
  UnderConstruction
  InDevelopment
}

type ConstructionInformation {
  type: ConstructionType
  from: Date
  to: Date
  notes: String
}


input ConstructionInformationInput {
  type: ConstructionType
  from: Date
  to: Date
  notes: String
}

type PropertyAvailabilityInformation {
  availability: PropertyAvailability
  from: Date
  notes: String
  habitation: PropertyHabitation
  currentUse: String
  currentDestination: String
}

input PropertyAvailabilityInformationInput {
  availability: PropertyAvailability
  from: Date
  notes: String
  habitation: PropertyHabitation
  currentUse: String
  currentDestination: String
}

input CreatePimInput {
  realEstateType: RealEstateType!
  street: String!
  houseNumberPrefix: String
  houseNumber: String!
  houseNumberAddition: String
  constructionNumberPrefix: String
  constructionNumber: String
  constructionNumberAddition: String
  postalCode: String!
  district: String
  city: String!
  state: String
  county: String
  country: String!
  developmentType: DevelopmentType!
  status: PimStatus!
  salePrice: Float
  rentPrice: Float
  description: String
  livingArea: Int
  propertyType: PropertyType
  attention: String
}

input UpdatePimInput {
  id: String!
  realEstateType: RealEstateType!
  street: String!
  houseNumberPrefix: String
  houseNumber: String!
  houseNumberAddition: String
  constructionNumberPrefix: String
  constructionNumber: String
  constructionNumberAddition: String
  postalCode: String!
  district: String
  city: String!
  state: String
  county: String
  country: String!
  developmentType: DevelopmentType!
  status: PimStatus!
  salePrice: Float
  rentPrice: Float
  description: String
  livingArea: Int
  propertyType: PropertyType
  attention: String
}

union PimGeneral = HouseGeneral
scalar PimGeneralInput

type Pim {
  id: String!
  realEstateType: RealEstateType!
  street: String!
  houseNumberPrefix: String
  houseNumber: String!
  houseNumberAddition: String
  constructionNumberPrefix: String
  constructionNumber: String
  constructionNumberAddition: String
  postalCode: String!
  district: String
  city: String!
  state: String
  county: String
  country: String!
  developmentType: DevelopmentType!
  status: PimStatus!
  salePrice: Float
  rentPrice: Float
  description: String
  images: [File!]
  livingArea: Int
  propertyType: PropertyType
  attention: String
  completeness: Float!
  archived: Boolean!
  dateCreated: Date!
  houseGeneral: HouseGeneral
  floors: [Floor!]
  outsideFeatures: [OutsideFeature!]
}

union SpaceConfiguration = KitchenSpace

type Space {
  id: String!
  spaceType: SpaceType!
  spaceName: String
  extraRoomPossibility: Boolean!
  configuration: SpaceConfiguration
}

type Floor {
  id: String!
  floorDescription: String
  level: Int!
  floorType: FloorType!
  spaces: [Space!]
}

union OutsideFeatureConfiguration = GardenFeature

type OutsideFeature {
  id: String!
  description: String
  type: OutsideFeatureType!
  configuration: OutsideFeatureConfiguration
}

type Event {
  id: String!
  entityType: EventEntityType!
  relatedEntityId: String
  action: EventAction!
  timestamp: Date!
  data: String
  userId: String
}

type PimSearchResult {
  metadata: SearchMetadata
  items: [Pim!]
}

input ListPimsFilters {
  developmentType: DevelopmentType
  status: PimStatus
  houseNumberPrefix: String
  houseNumber: String
  houseNumberAddition: String
  constructionNumberPrefix: String
  constructionNumber: String
  constructionNumberAddition: String
  street: String
  postalCode: String
  district: String
  city: String
  state: String
  country: String
  archived: Boolean
}

input ChangesHistoryFilters {
  entityType: EventEntityType
}

input AddNewFloorInput {
  pimId: String!
  floorDescription: String
  floorType: FloorType!
}

input AddSpaceInput {
  spaceType: SpaceType!
  extraRoomPossibility: Boolean!
  pimId: String!
  floorId: String!
  spaceName: String
}

input UpdateSpaceInput {
  pimId: String!
  spaceId: String!
  spaceName: String
  space: UpdateSpaceInputConfiguration
}

input UpdateFloorInput {
  pimId: String!
  floorId: String!
  floorDescription: String
  floorType: FloorType
}

input AddOutsideFeatureInput {
  pimId: String!
  type: OutsideFeatureType!
  description: String
}

scalar UpdateSpaceInputConfiguration

scalar Dictionary

enum FilePermission {
  public,
  private
}

enum EntityWithFiles {
  Pim,
  Space
}

input CreateFileInput {
  fileName: String!
  fileType: String!
  permission: FilePermission!
  description: String
}

input AddFilesInput {
  fileIDs: [ID!]!
  entity: EntityWithFiles!
  entityID: ID!
}

type File {
  id: ID!
  fileName: String!
  description: String
  status: Int!
  fileType: String!
  permission: FilePermission!
  key: ID!
  createdAt: Date
  signedUrl: String
  url: String
  bucket: String
}


type Query {
  me: Profile @auth
  getProfile(id: ID!): Profile @auth
  listPims(filters: ListPimsFilters, pagination: Pagination, sort: [Sort!]): PimSearchResult! @auth
  getPim(id: ID!): Pim @auth
  getPropertyTypes: [String!]!
  getChangesHistory(filters: ChangesHistoryFilters): [Event!]!
  dictionary: Dictionary
}

type Mutation {
  #REST don't remove
  login(input: LoginInput): LoginResponse
  forgotPassword(input: ForgotPasswordInput): ForgotPasswordResponse
  resetPassword(input: ResetPasswordInput, token: String!): ResetPasswordResponse
  #END REST
  deleteUser(id: String): String @auth
  createPim(input: CreatePimInput!): Pim @auth
  updatePim(input: UpdatePimInput!): Pim @auth
  removePim(id: String!): String @auth
  updatePimGeneralInfo(input: PimGeneralInput!): Pim @auth
  addFloorToPim(input: AddNewFloorInput!): Pim @auth
  addSpaceToFloor(input: AddSpaceInput!): Pim @auth
  updateSpace(input: UpdateSpaceInput!): Pim @auth
  updateFloor(input: UpdateFloorInput!): Pim @auth
  addOutsideFeature(input: AddOutsideFeatureInput!): Pim @auth
  addFiles(input: AddFilesInput!): [File!]! @auth
}
