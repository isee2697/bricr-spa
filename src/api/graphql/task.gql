enum TaskLabel {
  FollowUp
  Business
  Private
}

enum TaskPriority {
  High
  Medium
  Low
}

enum TaskStatus {
  ToDo
  InProgress
  Blocked
  Done
}

type Task {
  id: ID!
  title: String!
  assignee: ID!
  startDate: Date!
  deadline: Date!
  priority: TaskPriority!
  label: TaskLabel!
  status: TaskStatus!
  description: String
}

type TaskSearchResult {
  metadata: SearchMetadata
  items: [Task!]
}

input CreateTaskInput {
  title: String!
  assignee: ID!
  startDate: Date!
  deadline: Date!
  priority: TaskPriority!
  label: TaskLabel!
}

input UpdateTaskInput {
  id: ID!
  title: String
  assignee: ID
  startDate: Date
  deadline: Date
  priority: TaskPriority
  label: TaskLabel
  status: TaskStatus
  description: String
}

input DateRange {
  from: Date
  to: Date
}

input TaskFilters {
  search: String
  assignees: [ID!]
  startDate: DateRange
  deadline: DateRange
}

extend type Mutation {
  createTask(input: CreateTaskInput!): Task! @auth
  updateTask(input: UpdateTaskInput!): Task @auth
}

extend type Query {
  getTask(id: ID!): Task @auth
  getTasks(filters: TaskFilters, sort: [Sort!]): TaskSearchResult @auth
}
